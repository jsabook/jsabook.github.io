<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Qier&#39;s blog</title>
  <icon>http://yoursite.com/icon.png</icon>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2022-03-07T04:53:30.725Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>qier</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Summary</title>
    <link href="http://yoursite.com/2022/03/07/Summary/"/>
    <id>http://yoursite.com/2022/03/07/Summary/</id>
    <published>2022-03-07T04:53:30.725Z</published>
    <updated>2022-03-07T04:53:30.725Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Cloudendure原理</title>
    <link href="http://yoursite.com/2022/03/06/CloudendureOfAws/"/>
    <id>http://yoursite.com/2022/03/06/CloudendureOfAws/</id>
    <published>2022-03-06T16:00:00.000Z</published>
    <updated>2022-03-06T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="迁移初始化流程"><a href="#迁移初始化流程" class="headerlink" title="迁移初始化流程"></a>迁移初始化流程</h1><p>cloudendure进行初始化同步时候所经历的操作。初始化需要进行哪些操作，如下图所示：<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210307023723369.png" alt="在这里插入图片描述"></p><p>一共分为两部分。即cloudendure 对接公网迁移与对接内网迁移同步</p><h2 id="公网迁移"><a href="#公网迁移" class="headerlink" title="公网迁移"></a>公网迁移</h2><p>源主机与cloudendure console 进行交互,cloudendure console告诉aws,相关<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210307023837869.png" alt="在这里插入图片描述"></p><h2 id="客户私有网络"><a href="#客户私有网络" class="headerlink" title="客户私有网络"></a>客户私有网络</h2><h3 id="客户私有网络对接aws私有网络"><a href="#客户私有网络对接aws私有网络" class="headerlink" title="客户私有网络对接aws私有网络"></a>客户私有网络对接aws私有网络</h3><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/2021030702400835.png" alt=""></p><h3 id="客户私有网络对接aws公有网络（红色线）"><a href="#客户私有网络对接aws公有网络（红色线）" class="headerlink" title="客户私有网络对接aws公有网络（红色线）"></a>客户私有网络对接aws公有网络（红色线）</h3><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210307024051932.png" alt="在这里插入图片描述"></p><h1 id="Cloudendure使用"><a href="#Cloudendure使用" class="headerlink" title="Cloudendure使用"></a>Cloudendure使用</h1><p>在IDC环境中，将SSM Agent安装到对应主机，并通过Cloudendure进行迁移。迁移完毕之后使用SSM进行连接克隆机，对克隆机进行操作</p><h1 id="Window环境"><a href="#Window环境" class="headerlink" title="Window环境"></a>Window环境</h1><h2 id="安装SSM-agent"><a href="#安装SSM-agent" class="headerlink" title="安装SSM agent"></a>安装SSM agent</h2><p>在本地IDC环境中，给主机安装SSM Agent<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143139432.png" alt="在这里插入图片描述"></p><p>将软件上传上去，双击执行安装</p><h2 id="进行Cloudendure迁移"><a href="#进行Cloudendure迁移" class="headerlink" title="进行Cloudendure迁移"></a>进行Cloudendure迁移</h2><p>选择role<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143231995.png" alt="在这里插入图片描述"></p><p>role附加的策略<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143240481.png" alt=""></p><p>等待迁移成功<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143249889.png" alt="在这里插入图片描述"></p><h2 id="Cloudendure-Test测试"><a href="#Cloudendure-Test测试" class="headerlink" title="Cloudendure Test测试"></a>Cloudendure Test测试</h2><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/202103191433000.png" alt="在这里插入图片描述"></p><p>克隆机迁移成功<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143328821.png" alt="在这里插入图片描述"></p><h2 id="使用SSM-连接克隆机"><a href="#使用SSM-连接克隆机" class="headerlink" title="使用SSM 连接克隆机"></a>使用SSM 连接克隆机</h2><p>这里使用SSM连接克隆机，执行一个简单的Powershell命令</p><p>选择AWS-RunPowershell命令</p><p>设置命令参数</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143340189.png" alt="在这里插入图片描述"></p><p>选择实例</p><p>![[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传<img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/2021031914335886.png" alt=""></p><p>输出</p><p>![[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传<img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143417132.png" alt=""></p><h1 id="Linux环境"><a href="#Linux环境" class="headerlink" title="Linux环境"></a>Linux环境</h1><h2 id="安装SSM-Agent"><a href="#安装SSM-Agent" class="headerlink" title="安装SSM Agent"></a>安装SSM Agent</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://s3.cn-north-1.amazonaws.com.cn/amazon-ssm-cn-north-1/latest/linux_amd64/amazon-ssm-agent.rpm</span><br><span class="line">rpm -ivh amazon-ssm-agent.rpm</span><br><span class="line">systemctl <span class="built_in">enable</span> amazon-ssm-agent</span><br></pre></td></tr></table></figure><h2 id="进行迁移"><a href="#进行迁移" class="headerlink" title="进行迁移"></a>进行迁移</h2><p>迁移的时候需要进行设置，选择IAM <img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143430293.png" alt="在这里插入图片描述"><br>IAM需要具备SSM权限<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143442653.png" alt="在这里插入图片描述"></p><p>开始迁移<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143500889.png" alt="在这里插入图片描述"></p><p>等待迁移完毕<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143523638.png" alt="在这里插入图片描述"></p><h2 id="使用SSM进行连接"><a href="#使用SSM进行连接" class="headerlink" title="使用SSM进行连接"></a>使用SSM进行连接</h2><p>使用SSM进行连接，进行简单的测试。</p><p>选择AWS-RunShellScript操作，编写命令参数</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143534251.png" alt="在这里插入图片描述"></p><p>选择实例</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/2021031914354231.png" alt="在这里插入图片描述"></p><p>运行命令，查看输出<br><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/20210319143605629.png" alt="在这里插入图片描述"></p>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h1 id=&quot;迁移初始化流程&quot;&gt;&lt;a
        
      
    
    </summary>
    
    
      <category term="迁移" scheme="http://yoursite.com/categories/%E8%BF%81%E7%A7%BB/"/>
    
    
      <category term="AWS" scheme="http://yoursite.com/tags/AWS/"/>
    
  </entry>
  
  <entry>
    <title>SIEM on Amazon OpenSearch Service</title>
    <link href="http://yoursite.com/2022/03/02/SIEMonAmazonOpenSearchService/"/>
    <id>http://yoursite.com/2022/03/02/SIEMonAmazonOpenSearchService/</id>
    <published>2022-03-02T16:00:00.000Z</published>
    <updated>2022-03-02T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h1><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220303100505518.png" alt="image-20220303100505518"></p><p>核心代码是中间的ETL Lambda，通过这个Lambda来对各种日志进行ETL处理。</p><h1 id="支持日志"><a href="#支持日志" class="headerlink" title="支持日志"></a>支持日志</h1><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220303102525168.png" alt="image-20220303102525168"></p><p><strong>dashboard</strong>展示</p><p><a href="https://github.com/aws-samples/siem-on-amazon-opensearch-service/blob/main/docs/dashboard.md" target="_blank" rel="noopener">dashboard展示</a></p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220303102547395.png" alt="image-20220303102547395"></p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220303102605583.png" alt="image-20220303102605583"></p>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h1 id=&quot;架构&quot;&gt;&lt;a href=&quot;#架构&quot;
        
      
    
    </summary>
    
    
      <category term="SIEM" scheme="http://yoursite.com/categories/SIEM/"/>
    
    
      <category term="AWS 日志分析" scheme="http://yoursite.com/tags/AWS-%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>Gitlab CICD</title>
    <link href="http://yoursite.com/2022/02/28/GitlabCICD/"/>
    <id>http://yoursite.com/2022/02/28/GitlabCICD/</id>
    <published>2022-02-28T16:00:00.000Z</published>
    <updated>2022-02-28T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="关键词"><a href="#关键词" class="headerlink" title="关键词"></a>关键词</h1><h3 id="Pipeline"><a href="#Pipeline" class="headerlink" title="Pipeline"></a><strong>Pipeline</strong></h3><p>Pipeline执行的过程就是一次执行Stage中的列表流程的阶段。</p><h3 id="Stages"><a href="#Stages" class="headerlink" title="Stages"></a><strong>Stages</strong></h3><p>默认的Stage</p><p>Gitlab的Pipeline有一个默认的Stages流程，如果ci文件中没有存在的Stages阶段，则会使用官方提供的Stages阶段。Gitlab CICD的pipeline有一个默认的stages即下列阶段。</p><ul><li>.pre</li><li>build</li><li>test</li><li>deploy</li></ul><p>多个任务可以分配给同一个Stage。而分配给同一个Stage的任务是并行执行的。</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220301110307460.png" alt="image-20220301110307460"></p><p>其中的job3与jib4按照理论就是并行执行的。</p><p>可以定义自己的stages流程。如下图</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220301110823693.png" alt="image-20220301110823693"></p><p>如图所示job3与job4都分配给了stage3.</p><p>运行结果</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220301110856746.png" alt="image-20220301110856746"></p><p><strong>Script</strong></p><p>所有的job都需要有这么一个关键词。script就是执行Linux命令</p><p>下图显示了如何使用script执行Linux命令</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220301111235615.png" alt="image-20220301111235615"></p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220301111306218.png" alt="image-20220301111306218"></p><p><strong>retry</strong></p><p>运行失败，重新运行几遍.一般取值为3</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test:</span><br><span class="line">  script: respc</span><br><span class="line">  retry: 2</span><br></pre></td></tr></table></figure><p>或者指定失败原因，当这个失败原因的时候才回去触发重试机制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">test:</span><br><span class="line">  script: respc</span><br><span class="line">  retry: </span><br><span class="line">    max: 2</span><br><span class="line">    when: runner_system_failure</span><br></pre></td></tr></table></figure><p>失败原因 列表 todo</p><p><strong>when</strong></p><p>发生故障或者经过故障仍然能够运行的作业</p><p><strong>only</strong></p><p>指定分支，only/except 是规定当前job的可见状态，一个项目有很多分支，tag，我们的流水线，为了对特定的分支，特定的tag执行不同的job，这里就要使用only和except 在任务上加上这一段代码，就表明当前任务只有在master分支可以运行。</p><h3 id="cache"><a href="#cache" class="headerlink" title="cache"></a><strong>cache</strong></h3><p>缓存是将当前工作环境目录中的一些文件，一些文件夹存储起来，用于在各个任务初始化的时候恢复。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cache:</span><br><span class="line">  key: hello-vue-cache</span><br><span class="line">  path:</span><br><span class="line">    - node_modules</span><br></pre></td></tr></table></figure><p>在其他任务启动的时候就会恢复这个缓存目录，并不会讲缓存目录删除掉。如果没有缓存，则等待任务结束会将产生的文件删除掉。</p><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>image 是全局关键词可以在全局层面设置image镜像之后，在单独的job任务中也设置镜像。由于每个服务是单独的，也和前面的cache关键词对应起来。</p><h1 id="注入变量"><a href="#注入变量" class="headerlink" title="注入变量"></a>注入变量</h1><ul><li>gitlab-ci.yml中自己定义</li><li>pipeline中预定义的变量<ul><li>在这个网址中进行查询<a href="https://docs.gitlab.com/ee/ci/variables/predefined_variables.html" target="_blank" rel="noopener">https://docs.gitlab.com/ee/ci/variables/predefined_variables.html</a></li></ul></li><li>在项目中设置变量</li></ul><p><strong>gitlab-ci.yml中自己定义</strong></p><p>全局变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">variables:</span><br><span class="line">  MT_VAR: &quot;All jobs can use this variable&#96;s value&quot;</span><br><span class="line">logs_var:</span><br><span class="line">  script:</span><br><span class="line">    - echo $MT_VAR</span><br><span class="line">job_deploy:</span><br><span class="line">  variables:</span><br><span class="line">    imgname: &quot;name2&quot;</span><br><span class="line">    containername: &quot;name1&quot;</span><br><span class="line">  script:</span><br><span class="line">    - docker build -t $imgname</span><br></pre></td></tr></table></figure><p>如何查看pipeline中预定义的变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">get_all_var:</span><br><span class="line">  scropt:</span><br><span class="line">    - export</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h1 id=&quot;关键词&quot;&gt;&lt;a href=&quot;#关键词&quot;
        
      
    
    </summary>
    
    
      <category term="gitlab" scheme="http://yoursite.com/categories/gitlab/"/>
    
    
      <category term="gitlab" scheme="http://yoursite.com/tags/gitlab/"/>
    
      <category term="CICD" scheme="http://yoursite.com/tags/CICD/"/>
    
  </entry>
  
  <entry>
    <title>AWS使用SSM</title>
    <link href="http://yoursite.com/2022/02/16/SSMUse/"/>
    <id>http://yoursite.com/2022/02/16/SSMUse/</id>
    <published>2022-02-16T16:00:00.000Z</published>
    <updated>2022-02-27T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="创建Role所需的的Policy"><a href="#创建Role所需的的Policy" class="headerlink" title="创建Role所需的的Policy"></a>创建Role所需的的Policy</h1><h2 id="创建Role-选定EC2。"><a href="#创建Role-选定EC2。" class="headerlink" title="创建Role,选定EC2。"></a><strong>创建Role,选定EC2。</strong></h2><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228110527044.png" alt="image-20220228110527044"></p><h2 id="选定策略"><a href="#选定策略" class="headerlink" title="选定策略"></a><strong>选定策略</strong></h2><p>关于策略说明</p><p>基础策略：<strong>AmazonSSMManagedInstanceCore</strong></p><p>其他策略：</p><ul><li><strong>AmazonSSMDirectoryServiceAccess</strong>：将 Windows Server 的 Amazon EC2 实例加入 Microsoft AD 目录时才需要。</li><li><strong>CloudWatchAgentServerPolicy</strong>：仅当计划在实例上安装和运行 CloudWatch 代理以读取实例上的指标和日志数据并将其写入 Amazon CloudWatch 时才需要。</li></ul><p>这里选择<strong>AmazonSSMManagedInstanceCore</strong>策略即可。</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228110900103.png" alt="image-20220228110900103"></p><h2 id="名称设置，然后创建角色"><a href="#名称设置，然后创建角色" class="headerlink" title="名称设置，然后创建角色"></a>名称设置，然后创建角色</h2><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228111304095.png" alt="image-20220228111304095"></p><h1 id="将Role-Attach到EC2"><a href="#将Role-Attach到EC2" class="headerlink" title="将Role Attach到EC2"></a>将Role Attach到EC2</h1><p>选择修改IAM角色</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228112047277.png" alt="image-20220228112047277"></p><h1 id="SSM-运行"><a href="#SSM-运行" class="headerlink" title="SSM 运行"></a>SSM 运行</h1><h2 id="运行脚本"><a href="#运行脚本" class="headerlink" title="运行脚本"></a>运行脚本</h2><p><strong>选择SSM的运行命令</strong></p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228112200468.png" alt="image-20220228112200468"></p><p><strong>选择Shell脚本运行</strong></p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228112334472.png" alt="image-20220228112334472"></p><p><strong>运行命令</strong></p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228113101896.png" alt="image-20220228113101896"></p><p><strong>写入命令</strong></p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228113207080.png" alt="image-20220228113207080"></p><p><strong>目标选择</strong></p><p>这里选择手动选择实例</p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228113332954.png" alt="image-20220228113332954"></p><p><strong>运行命令，查看结果</strong></p><h2 id="会话管理器"><a href="#会话管理器" class="headerlink" title="会话管理器"></a>会话管理器</h2><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228134314065.png" alt="image-20220228134314065"></p><p><strong>连接使用</strong></p><p><img src="https://raw.githubusercontent.com/jsabook/githubPic/main/myblog/image-20220228134418778.png" alt="image-20220228134418778"></p>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h1 id=&quot;创建Role所需的的Policy&quot;&gt;&lt;a
        
      
    
    </summary>
    
    
      <category term="EC2" scheme="http://yoursite.com/categories/EC2/"/>
    
    
      <category term="EC2" scheme="http://yoursite.com/tags/EC2/"/>
    
  </entry>
  
  <entry>
    <title>AWS的资费</title>
    <link href="http://yoursite.com/2022/02/15/BillingOfAWS-test/"/>
    <id>http://yoursite.com/2022/02/15/BillingOfAWS-test/</id>
    <published>2022-02-15T16:00:00.000Z</published>
    <updated>2022-02-15T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="EC2收费"><a href="#EC2收费" class="headerlink" title="EC2收费"></a>EC2收费</h1><table><thead><tr><th>收费名称</th><th>含义</th><th>备注</th></tr></thead><tbody><tr><td>Amazon Elastic Compute Cloud NatGateway</td><td>Nat网关费用</td><td>$0.059 per NAT Gateway Hour</td></tr><tr><td>Amazon Elastic Compute Cloud running</td><td>EC2费用</td><td></td></tr><tr><td>EBS</td><td>EBS卷费用</td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h1 id="RDS费用"><a href="#RDS费用" class="headerlink" title="RDS费用"></a>RDS费用</h1><table><thead><tr><th>收费名称</th><th>含义</th><th>备注</th></tr></thead><tbody><tr><td>Amazon Relational Database Service Backup Storage</td><td>备份存储费用（快照）</td><td>USD 0.095 per GB-month of backup storage exceeding free allocation</td></tr><tr><td>Amazon Relational Database Service</td><td>数据库实例费用</td><td>按照实例规格每小时收费，与EC2费用相同</td></tr><tr><td>Amazon Relational Database Service Provisioned Storage</td><td>预置IOPS费用</td><td>极其昂贵</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h1 id=&quot;EC2收费&quot;&gt;&lt;a href=&quot;#EC2收费&quot;
        
      
    
    </summary>
    
    
      <category term="Billing" scheme="http://yoursite.com/categories/Billing/"/>
    
    
      <category term="EC2" scheme="http://yoursite.com/tags/EC2/"/>
    
      <category term="RDS" scheme="http://yoursite.com/tags/RDS/"/>
    
      <category term="EBS" scheme="http://yoursite.com/tags/EBS/"/>
    
  </entry>
  
  <entry>
    <title>AWS的资费</title>
    <link href="http://yoursite.com/2022/02/15/BillingOfAWS/"/>
    <id>http://yoursite.com/2022/02/15/BillingOfAWS/</id>
    <published>2022-02-15T16:00:00.000Z</published>
    <updated>2022-02-15T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="EC2收费"><a href="#EC2收费" class="headerlink" title="EC2收费"></a>EC2收费</h1><table><thead><tr><th>收费名称</th><th>含义</th><th>备注</th></tr></thead><tbody><tr><td>Amazon Elastic Compute Cloud NatGateway</td><td>Nat网关费用</td><td>$0.059 per NAT Gateway Hour</td></tr><tr><td>Amazon Elastic Compute Cloud running</td><td>EC2费用</td><td></td></tr><tr><td>EBS</td><td>EBS卷费用</td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h1 id="RDS费用"><a href="#RDS费用" class="headerlink" title="RDS费用"></a>RDS费用</h1><table><thead><tr><th>收费名称</th><th>含义</th><th>备注</th></tr></thead><tbody><tr><td>Amazon Relational Database Service Backup Storage</td><td>备份存储费用（快照）</td><td>USD 0.095 per GB-month of backup storage exceeding free allocation</td></tr><tr><td>Amazon Relational Database Service</td><td>数据库实例费用</td><td>按照实例规格每小时收费，与EC2费用相同</td></tr><tr><td>Amazon Relational Database Service Provisioned Storage</td><td>预置IOPS费用</td><td>极其昂贵</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h1 id=&quot;EC2收费&quot;&gt;&lt;a href=&quot;#EC2收费&quot;
        
      
    
    </summary>
    
    
      <category term="Billing" scheme="http://yoursite.com/categories/Billing/"/>
    
    
      <category term="EC2" scheme="http://yoursite.com/tags/EC2/"/>
    
      <category term="RDS" scheme="http://yoursite.com/tags/RDS/"/>
    
      <category term="EBS" scheme="http://yoursite.com/tags/EBS/"/>
    
  </entry>
  
  <entry>
    <title>AWS的IOPS</title>
    <link href="http://yoursite.com/2022/02/13/IopsOfAWS/"/>
    <id>http://yoursite.com/2022/02/13/IopsOfAWS/</id>
    <published>2022-02-13T16:00:00.000Z</published>
    <updated>2022-02-13T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="IOPS介绍"><a href="#IOPS介绍" class="headerlink" title="IOPS介绍"></a>IOPS介绍</h1><p>IOPS(Input/Output Per Second) 每秒的读写次数，是衡量磁盘性能的主要指标之一。IOPS是指单位时间内系统能够处理的I/O请求数量。也就是讲的是单位时间内，磁盘能够进行多少次的I/O读写。</p><p><strong>Random Read IOPS，100%随机读负载情况下的IOPS</strong></p><p>默认为4k大小的数据块</p><h2 id="读写性能介绍"><a href="#读写性能介绍" class="headerlink" title="读写性能介绍"></a><strong>读写性能介绍</strong></h2><p>硬盘的读写性能又称为数据吞吐量(Throughput)，指的是单位时间内可以成功传输的数据数量。对于大量顺序读写的应用，如VOD，则更关注吞吐量指标。简单来讲，就是每秒磁盘I/O的流量。即磁盘写入加上磁盘读出的数据的大小。</p><h2 id="IOPS与吞吐量的关系"><a href="#IOPS与吞吐量的关系" class="headerlink" title="IOPS与吞吐量的关系"></a>IOPS与吞吐量的关系</h2><p>IOPS = </p>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h1 id=&quot;IOPS介绍&quot;&gt;&lt;a
        
      
    
    </summary>
    
    
      <category term="EC2" scheme="http://yoursite.com/categories/EC2/"/>
    
    
      <category term="EC2" scheme="http://yoursite.com/tags/EC2/"/>
    
      <category term="RDS" scheme="http://yoursite.com/tags/RDS/"/>
    
      <category term="EBS" scheme="http://yoursite.com/tags/EBS/"/>
    
  </entry>
  
  <entry>
    <title>vitess学习</title>
    <link href="http://yoursite.com/2022/01/25/vitesssummary/"/>
    <id>http://yoursite.com/2022/01/25/vitesssummary/</id>
    <published>2022-01-25T16:00:00.000Z</published>
    <updated>2022-01-25T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vitess组件说明"><a href="#vitess组件说明" class="headerlink" title="vitess组件说明"></a>vitess组件说明</h1><p><img src="img/method-draw-image.svg" alt="method-draw-image"></p><h1 id="架构说明"><a href="#架构说明" class="headerlink" title="架构说明"></a>架构说明</h1><p><img src="http://image.masikkk.com/blog/vitess-architecture-2.jpeg" alt="img"></p><p>从架构图可以看出来vttablet、shard与vtgate的关系：</p><p>一</p><h1 id="相关命令"><a href="#相关命令" class="headerlink" title="相关命令"></a>相关命令</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show vitess_tablets;</span><br></pre></td></tr></table></figure><p>查看相关表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show vitess_tablets;</span><br><span class="line">+-------+----------+-------+------------+---------+------------------+-------------+----------------------+</span><br><span class="line">| Cell  | Keyspace | Shard | TabletType | State   | Alias            | Hostname    | PrimaryTermStartTime |</span><br><span class="line">+-------+----------+-------+------------+---------+------------------+-------------+----------------------+</span><br><span class="line">| zone1 | sbtest   | -     | PRIMARY    | SERVING | zone1-2344898534 | 172.17.0.10 | 2022-01-25T18:04:19Z |</span><br><span class="line">| zone1 | sbtest   | -     | REPLICA    | SERVING | zone1-2646235096 | 172.17.0.9  |                      |</span><br><span class="line">+-------+----------+-------+------------+---------+------------------+-------------+----------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h1 id=&quot;vitess组件说明&quot;&gt;&lt;a
        
      
    
    </summary>
    
    
      <category term="k8s" scheme="http://yoursite.com/categories/k8s/"/>
    
    
  </entry>
  
  <entry>
    <title>AWS Route53功能汇总</title>
    <link href="http://yoursite.com/2022/01/12/AwsRoute53Summary/"/>
    <id>http://yoursite.com/2022/01/12/AwsRoute53Summary/</id>
    <published>2022-01-12T16:00:00.000Z</published>
    <updated>2022-01-12T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="6a73a603c48ea48209ca29479386fb6ec72e92cfa4e32365b08c52de83b2716f">db082def6a4e6e63f0ffa32ac468c42a627e29bfa4e17763852cdd73df70e1164dfb928f01ee95625dca55e655a48b4e846d53f584e43f615ecd0d1ef33928813d25a3322d72898f6889221ea21de820884b0664e8c6903b7684c90d823f304678d94379f046011bebb4c7601ef21688974430ac9dd0dadd0452f60ffd3fbdc90ffa21f1030d40d55f4fade898c3d83b584aa7ba99371a48fbcee0afc292c0af98f0415a6692d55b9518dc7f72da5c2879d4fa49d8f908ae1abe48a3bc68df3b434b2aeffd7b054a967713cb6c6ce9cff9712387f9a3afdf03cd485d09eadfa0</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      Here&#39;s something encrypted, password is required to continue reading.
    
    </summary>
    
    
      <category term="AWS" scheme="http://yoursite.com/categories/AWS/"/>
    
    
      <category term="Route" scheme="http://yoursite.com/tags/Route/"/>
    
      <category term="DNS" scheme="http://yoursite.com/tags/DNS/"/>
    
  </entry>
  
</feed>
